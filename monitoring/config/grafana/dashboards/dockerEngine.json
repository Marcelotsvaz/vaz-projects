{
	"__inputs": [
	  {
		"name": "DS_PROMETHEUS",
		"label": "Prometheus",
		"description": "",
		"type": "datasource",
		"pluginId": "prometheus",
		"pluginName": "Prometheus"
	  }
	],
	"__requires": [
	  {
		"type": "panel",
		"id": "text",
		"name": "Text",
		"version": ""
	  },
	  {
		"type": "panel",
		"id": "singlestat",
		"name": "Singlestat",
		"version": ""
	  },
	  {
		"type": "panel",
		"id": "graph",
		"name": "Graph",
		"version": ""
	  },
	  {
		"type": "grafana",
		"id": "grafana",
		"name": "Grafana",
		"version": "4.1.0-beta1"
	  },
	  {
		"type": "datasource",
		"id": "prometheus",
		"name": "Prometheus",
		"version": "1.0.0"
	  }
	],
	"id": null,
	"title": "Docker Engine Metrics",
	"description": "Draw some docker metrics",
	"tags": [
	  "docker",
	  "docker metrics",
	  "docker engine"
	],
	"style": "dark",
	"timezone": "browser",
	"editable": true,
	"graphTooltip": 0,
	"hideControls": false,
	"time": {
	  "from": "now-1h",
	  "to": "now"
	},
	"timepicker": {
	  "refresh_intervals": [
		"5s",
		"10s",
		"30s",
		"1m",
		"5m",
		"15m",
		"30m",
		"1h",
		"2h",
		"1d"
	  ],
	  "time_options": [
		"5m",
		"15m",
		"1h",
		"6h",
		"12h",
		"24h",
		"2d",
		"7d",
		"30d"
	  ]
	},
	"templating": {
	  "list": [
		{
		  "auto": true,
		  "auto_count": 30,
		  "auto_min": "10s",
		  "current": {
			"text": "30s",
			"value": "30s"
		  },
		  "hide": 0,
		  "label": "Interval",
		  "name": "interval",
		  "options": [
			{
			  "text": "auto",
			  "value": "$__auto_interval",
			  "selected": false
			},
			{
			  "text": "30s",
			  "value": "30s",
			  "selected": true
			},
			{
			  "text": "1m",
			  "value": "1m",
			  "selected": false
			},
			{
			  "text": "2m",
			  "value": "2m",
			  "selected": false
			},
			{
			  "text": "3m",
			  "value": "3m",
			  "selected": false
			},
			{
			  "text": "5m",
			  "value": "5m",
			  "selected": false
			},
			{
			  "text": "7m",
			  "value": "7m",
			  "selected": false
			},
			{
			  "text": "10m",
			  "value": "10m",
			  "selected": false
			},
			{
			  "text": "30m",
			  "value": "30m",
			  "selected": false
			},
			{
			  "text": "1h",
			  "value": "1h",
			  "selected": false
			},
			{
			  "text": "6h",
			  "value": "6h",
			  "selected": false
			},
			{
			  "text": "12h",
			  "value": "12h",
			  "selected": false
			},
			{
			  "text": "1d",
			  "value": "1d",
			  "selected": false
			},
			{
			  "text": "7d",
			  "value": "7d",
			  "selected": false
			},
			{
			  "text": "14d",
			  "value": "14d",
			  "selected": false
			},
			{
			  "text": "30d",
			  "value": "30d",
			  "selected": false
			}
		  ],
		  "query": "30s,1m,2m,3m,5m,7m,10m,30m,1h,6h,12h,1d,7d,14d,30d",
		  "refresh": 2,
		  "type": "interval"
		},
		{
		  "allValue": null,
		  "current": {},
		  "datasource": "${DS_PROMETHEUS}",
		  "hide": 0,
		  "includeAll": true,
		  "label": "Instance",
		  "multi": false,
		  "name": "instance",
		  "options": [],
		  "query": "engine_daemon_engine_info",
		  "refresh": 1,
		  "regex": "/instance=\"([^\"]+)\"/",
		  "sort": 0,
		  "tagValuesQuery": null,
		  "tagsQuery": null,
		  "type": "query"
		}
	  ]
	},
	"annotations": {
	  "list": []
	},
	"schemaVersion": 14,
	"version": 10,
	"links": [],
	"gnetId": 1229,
	"rows": [
	  {
		"title": "Instance",
		"panels": [
		  {
			"content": "",
			"description": "",
			"id": 2,
			"links": [],
			"mode": "text",
			"repeat": "instance",
			"span": 12,
			"title": "$instance",
			"type": "text"
		  }
		],
		"showTitle": false,
		"titleSize": "h6",
		"height": 27,
		"repeat": null,
		"repeatRowId": null,
		"repeatIteration": null,
		"collapse": false
	  },
	  {
		"title": "CPUs",
		"panels": [
		  {
			"cacheTimeout": null,
			"colorBackground": false,
			"colorValue": true,
			"colors": [
			  "rgba(245, 54, 54, 0.9)",
			  "rgba(237, 129, 40, 0.89)",
			  "rgba(50, 172, 45, 0.97)"
			],
			"datasource": "${DS_PROMETHEUS}",
			"description": "Number of CPUs",
			"format": "none",
			"gauge": {
			  "maxValue": 100,
			  "minValue": 0,
			  "show": false,
			  "thresholdLabels": false,
			  "thresholdMarkers": true
			},
			"id": 7,
			"interval": null,
			"links": [],
			"mappingType": 1,
			"mappingTypes": [
			  {
				"name": "value to text",
				"value": 1
			  },
			  {
				"name": "range to text",
				"value": 2
			  }
			],
			"maxDataPoints": 100,
			"nullPointMode": "connected",
			"nullText": null,
			"postfix": "",
			"postfixFontSize": "50%",
			"prefix": "",
			"prefixFontSize": "50%",
			"rangeMaps": [
			  {
				"from": "null",
				"text": "N/A",
				"to": "null"
			  }
			],
			"repeat": "instance",
			"span": 12,
			"sparkline": {
			  "fillColor": "rgba(31, 118, 189, 0.18)",
			  "full": false,
			  "lineColor": "rgb(31, 120, 193)",
			  "show": false
			},
			"targets": [
			  {
				"expr": "count(engine_daemon_engine_cpus_cpus{instance=~'$instance'})",
				"intervalFactor": 2,
				"legendFormat": "",
				"metric": "engine_daemon_engine_cpus_cpus",
				"refId": "A",
				"step": 60
			  }
			],
			"thresholds": "",
			"title": "CPU Cores",
			"type": "singlestat",
			"valueFontSize": "80%",
			"valueMaps": [
			  {
				"op": "=",
				"text": "N/A",
				"value": "null"
			  }
			],
			"valueName": "current"
		  }
		],
		"showTitle": false,
		"titleSize": "h6",
		"height": 51,
		"repeat": null,
		"repeatRowId": null,
		"repeatIteration": null,
		"collapse": false
	  },
	  {
		"title": "Time x container 90%",
		"panels": [
		  {
			"aliasColors": {},
			"bars": false,
			"datasource": "${DS_PROMETHEUS}",
			"description": "Measuring some percentiles performance",
			"fill": 1,
			"id": 14,
			"legend": {
			  "alignAsTable": false,
			  "avg": false,
			  "current": false,
			  "hideEmpty": true,
			  "hideZero": true,
			  "max": false,
			  "min": false,
			  "show": true,
			  "total": false,
			  "values": false
			},
			"lines": true,
			"linewidth": 1,
			"links": [],
			"nullPointMode": "null as zero",
			"percentage": false,
			"pointradius": 5,
			"points": false,
			"renderer": "flot",
			"repeat": "instance",
			"seriesOverrides": [],
			"span": 12,
			"stack": false,
			"steppedLine": false,
			"targets": [
			  {
				"expr": "histogram_quantile(0.99, rate(engine_daemon_container_actions_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "{{action}} 99",
				"refId": "A",
				"step": 4
			  },
			  {
				"expr": "histogram_quantile(0.90, rate(engine_daemon_container_actions_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "{{action}} 90",
				"refId": "B",
				"step": 4
			  },
			  {
				"expr": "histogram_quantile(0.50, rate(engine_daemon_container_actions_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "{{action}} 50",
				"refId": "C",
				"step": 4
			  },
			  {
				"expr": "histogram_quantile(0.25, rate(engine_daemon_container_actions_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "{{action}} 25",
				"refId": "D",
				"step": 4
			  }
			],
			"thresholds": [],
			"timeFrom": null,
			"timeShift": null,
			"title": "Time x Container Action percentile",
			"tooltip": {
			  "shared": true,
			  "sort": 0,
			  "value_type": "individual"
			},
			"type": "graph",
			"xaxis": {
			  "mode": "time",
			  "name": null,
			  "show": true,
			  "values": []
			},
			"yaxes": [
			  {
				"format": "short",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  },
			  {
				"format": "short",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  }
			]
		  }
		],
		"showTitle": false,
		"titleSize": "h6",
		"height": 250,
		"repeat": null,
		"repeatRowId": null,
		"repeatIteration": null,
		"collapse": false
	  },
	  {
		"title": "Total container",
		"panels": [
		  {
			"aliasColors": {},
			"bars": false,
			"datasource": "${DS_PROMETHEUS}",
			"fill": 1,
			"id": 15,
			"legend": {
			  "avg": false,
			  "current": false,
			  "hideEmpty": true,
			  "hideZero": true,
			  "max": false,
			  "min": false,
			  "show": true,
			  "total": false,
			  "values": false
			},
			"lines": true,
			"linewidth": 1,
			"links": [],
			"nullPointMode": "null",
			"percentage": false,
			"pointradius": 5,
			"points": false,
			"renderer": "flot",
			"repeat": "instance",
			"seriesOverrides": [],
			"span": 12,
			"stack": false,
			"steppedLine": false,
			"targets": [
			  {
				"expr": "engine_daemon_container_actions_seconds_count{instance=~'$instance'}",
				"intervalFactor": 2,
				"legendFormat": "{{action}}",
				"metric": "engine_daemon_container_actions_seconds_count",
				"refId": "A",
				"step": 4
			  }
			],
			"thresholds": [],
			"timeFrom": null,
			"timeShift": null,
			"title": "Total Container Actions",
			"tooltip": {
			  "shared": true,
			  "sort": 2,
			  "value_type": "individual"
			},
			"type": "graph",
			"xaxis": {
			  "mode": "time",
			  "name": null,
			  "show": true,
			  "values": []
			},
			"yaxes": [
			  {
				"format": "short",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  },
			  {
				"format": "short",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  }
			]
		  }
		],
		"showTitle": false,
		"titleSize": "h6",
		"height": 250,
		"repeat": null,
		"repeatRowId": null,
		"repeatIteration": null,
		"collapse": false
	  },
	  {
		"title": "Dashboard Row",
		"panels": [
		  {
			"aliasColors": {},
			"bars": false,
			"datasource": "${DS_PROMETHEUS}",
			"description": "Measuring some percentiles performance",
			"fill": 1,
			"id": 22,
			"legend": {
			  "alignAsTable": false,
			  "avg": false,
			  "current": false,
			  "hideEmpty": true,
			  "hideZero": true,
			  "max": false,
			  "min": false,
			  "show": true,
			  "total": false,
			  "values": false
			},
			"lines": true,
			"linewidth": 1,
			"links": [],
			"nullPointMode": "null as zero",
			"percentage": false,
			"pointradius": 5,
			"points": false,
			"renderer": "flot",
			"seriesOverrides": [],
			"span": 12,
			"stack": false,
			"steppedLine": false,
			"targets": [
			  {
				"expr": "histogram_quantile(0.99, rate(engine_daemon_network_actions_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "{{action}} 99",
				"refId": "A",
				"step": 4
			  },
			  {
				"expr": "histogram_quantile(0.90, rate(engine_daemon_network_actions_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "{{action}} 90",
				"refId": "B",
				"step": 4
			  },
			  {
				"expr": "histogram_quantile(0.50, rate(engine_daemon_network_actions_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "{{action}} 50",
				"refId": "C",
				"step": 4
			  },
			  {
				"expr": "histogram_quantile(0.25, rate(engine_daemon_network_actions_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "{{action}} 25",
				"refId": "D",
				"step": 4
			  }
			],
			"thresholds": [],
			"timeFrom": null,
			"timeShift": null,
			"title": "Time x Network Action percentile",
			"tooltip": {
			  "shared": true,
			  "sort": 0,
			  "value_type": "individual"
			},
			"type": "graph",
			"xaxis": {
			  "mode": "time",
			  "name": null,
			  "show": true,
			  "values": []
			},
			"yaxes": [
			  {
				"format": "short",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  },
			  {
				"format": "short",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  }
			],
			"repeat": "instance"
		  }
		],
		"showTitle": false,
		"titleSize": "h6",
		"height": 250,
		"repeat": null,
		"repeatRowId": null,
		"repeatIteration": null,
		"collapse": false
	  },
	  {
		"title": "Dashboard Row",
		"panels": [
		  {
			"aliasColors": {},
			"bars": false,
			"datasource": "${DS_PROMETHEUS}",
			"fill": 1,
			"id": 19,
			"legend": {
			  "avg": false,
			  "current": false,
			  "hideEmpty": true,
			  "hideZero": true,
			  "max": false,
			  "min": false,
			  "show": true,
			  "total": false,
			  "values": false
			},
			"lines": true,
			"linewidth": 1,
			"links": [],
			"nullPointMode": "null as zero",
			"percentage": false,
			"pointradius": 5,
			"points": false,
			"renderer": "flot",
			"seriesOverrides": [],
			"span": 12,
			"stack": false,
			"steppedLine": false,
			"targets": [
			  {
				"expr": "engine_daemon_network_actions_seconds_count{instance=~'$instance'}",
				"intervalFactor": 2,
				"legendFormat": "{{action}}",
				"metric": "engine_daemon_container_actions_seconds_count",
				"refId": "A",
				"step": 4
			  }
			],
			"thresholds": [],
			"timeFrom": null,
			"timeShift": null,
			"title": "Total Network Actions",
			"tooltip": {
			  "shared": true,
			  "sort": 2,
			  "value_type": "individual"
			},
			"type": "graph",
			"xaxis": {
			  "mode": "time",
			  "name": null,
			  "show": true,
			  "values": []
			},
			"yaxes": [
			  {
				"format": "none",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  },
			  {
				"format": "none",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  }
			],
			"repeat": "instance"
		  }
		],
		"showTitle": false,
		"titleSize": "h6",
		"height": 250,
		"repeat": null,
		"repeatRowId": null,
		"repeatIteration": null,
		"collapse": false
	  },
	  {
		"title": "Dashboard Row",
		"panels": [
		  {
			"aliasColors": {},
			"bars": false,
			"datasource": "${DS_PROMETHEUS}",
			"description": "Measuring histogram on some percentile",
			"fill": 1,
			"id": 21,
			"legend": {
			  "alignAsTable": false,
			  "avg": false,
			  "current": false,
			  "hideEmpty": true,
			  "hideZero": true,
			  "max": false,
			  "min": false,
			  "show": true,
			  "total": false,
			  "values": false
			},
			"lines": true,
			"linewidth": 1,
			"links": [],
			"nullPointMode": "null as zero",
			"percentage": false,
			"pointradius": 5,
			"points": false,
			"renderer": "flot",
			"seriesOverrides": [],
			"span": 12,
			"stack": false,
			"steppedLine": false,
			"targets": [
			  {
				"expr": "histogram_quantile(0.99, rate(etcd_disk_wal_fsync_duration_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "99",
				"refId": "D",
				"step": 4
			  },
			  {
				"expr": "histogram_quantile(0.90, rate(etcd_disk_wal_fsync_duration_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "90",
				"refId": "A",
				"step": 4
			  },
			  {
				"expr": "histogram_quantile(0.50, rate(etcd_disk_wal_fsync_duration_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "50",
				"refId": "B",
				"step": 4
			  },
			  {
				"expr": "histogram_quantile(0.10, rate(etcd_disk_wal_fsync_duration_seconds_bucket{instance=~'$instance'}[$interval]))",
				"intervalFactor": 2,
				"legendFormat": "10",
				"refId": "C",
				"step": 4
			  }
			],
			"thresholds": [],
			"timeFrom": null,
			"timeShift": null,
			"title": "etcd fsync wall percentile",
			"tooltip": {
			  "shared": true,
			  "sort": 0,
			  "value_type": "individual"
			},
			"type": "graph",
			"xaxis": {
			  "mode": "time",
			  "name": null,
			  "show": true,
			  "values": []
			},
			"yaxes": [
			  {
				"format": "short",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  },
			  {
				"format": "short",
				"label": null,
				"logBase": 1,
				"max": null,
				"min": null,
				"show": true
			  }
			],
			"repeat": "instance"
		  }
		],
		"showTitle": false,
		"titleSize": "h6",
		"height": 250,
		"repeat": null,
		"repeatRowId": null,
		"repeatIteration": null,
		"collapse": false
	  },
	  {
		"title": "Dashboard Row",
		"panels": [
		  {
			"id": 20,
			"title": "Event Subscribers",
			"span": 12,
			"type": "graph",
			"targets": [
			  {
				"expr": "engine_daemon_events_subscribers_total{instance=~'$instance'}",
				"intervalFactor": 2,
				"refId": "A",
				"step": 4,
				"legendFormat": " "
			  }
			],
			"datasource": "${DS_PROMETHEUS}",
			"renderer": "flot",
			"yaxes": [
			  {
				"label": null,
				"show": true,
				"logBase": 1,
				"min": null,
				"max": null,
				"format": "short"
			  },
			  {
				"label": null,
				"show": true,
				"logBase": 1,
				"min": null,
				"max": null,
				"format": "short"
			  }
			],
			"xaxis": {
			  "show": true,
			  "mode": "time",
			  "name": null,
			  "values": []
			},
			"lines": true,
			"fill": 1,
			"linewidth": 1,
			"points": false,
			"pointradius": 5,
			"bars": false,
			"stack": false,
			"percentage": false,
			"legend": {
			  "show": true,
			  "values": true,
			  "min": true,
			  "max": true,
			  "current": true,
			  "total": false,
			  "avg": false,
			  "alignAsTable": false
			},
			"nullPointMode": "null",
			"steppedLine": false,
			"tooltip": {
			  "value_type": "individual",
			  "shared": true,
			  "sort": 0
			},
			"timeFrom": null,
			"timeShift": null,
			"aliasColors": {},
			"seriesOverrides": [],
			"thresholds": [],
			"links": [],
			"repeat": "instance",
			"decimals": 0
		  }
		],
		"showTitle": false,
		"titleSize": "h6",
		"height": 250,
		"repeat": null,
		"repeatRowId": null,
		"repeatIteration": null,
		"collapse": false
	  }
	]
  }