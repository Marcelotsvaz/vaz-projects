#
# VAZ Projects
#
#
# Author: Marcelo Tellier Sartori Vaz <marcelotsvaz@gmail.com>



version: '3.8'



services:
    application:
        image: registry.gitlab.com/marcelotsvaz/vaz-projects/application:latest
        build: application/
        
        env_file:
            - server/scripts/local.sh
        
        volumes:
            - type: bind
              source: ./deployment/
              target: /usr/src/app/deployment/
        
        command: [ 'runserver', '0.0.0.0:8000' ]
        
        ports:
            - '8000:8000'
    
    
    memcached:
        image: memcached:1.6.13-bullseye
    
    
    elasticsearch:
        image: elasticsearch:7.16.3
        
        environment:
            - discovery.type=single-node
            - ES_JAVA_OPTS=-Xms128m -Xmx128m



# depends_on
# restart